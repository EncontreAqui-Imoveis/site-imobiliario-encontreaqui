
> site-imobiliario@0.1.0 test
> jest

FAIL src/contexts/__tests__/AuthContext.test.tsx
  ÔùÅ Test suite failed to run

    ReferenceError: fetch is not defined

      54 | export async function createFirebaseUser(email: string, password: string): Promise<UserCredential> {
      55 |     try {
    > 56 |         const userCredential = await createUserWithEmailAndPassword(auth, email, password)
         |               ^
      57 |         return userCredential
      58 |     } catch (error: any) {
      59 |         console.error('Create User Error:', error)

      at Object.<anonymous> (node_modules/@firebase/auth/src/platform_node/index.ts:33:26)
      at Object.<anonymous> (node_modules/@firebase/auth/dist/node/index.js:5:12)
      at Object.<anonymous> (node_modules/firebase/auth/dist/index.cjs.js:5:12)
      at Object.<anonymous> (src/lib/firebase.ts:56:15)
      at Object.<anonymous> (src/contexts/AuthContext.tsx:23:19)
      at Object.<anonymous> (src/contexts/__tests__/AuthContext.test.tsx:23:22)

FAIL src/app/cadastro/__tests__/integration.test.tsx (5.772 s)
  ÔùÅ Registration Integration ÔÇ║ renders phone verification page with user data

    ReferenceError: setSession is not defined

      252 |                 unreadNotifications,
      253 |                 refreshUnreadCount,
    > 254 |                 setSession,
          |                 ^
      255 |             }}
      256 |         >
      257 |             {children}

      at setSession (src/contexts/AuthContext.tsx:254:17)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:46:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:189:26)
      at render (node_modules/@testing-library/react/dist/pure.js:291:10)
      at Object.<anonymous> (src/app/cadastro/__tests__/integration.test.tsx:45:15)

Test Suites: 2 failed, 2 total
Tests:       1 failed, 1 total
Snapshots:   0 total
Time:        17.217 s
Ran all test suites.
