(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[567],{1786:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(1847).A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},4588:(e,t,s)=>{Promise.resolve().then(s.bind(s,8222))},5229:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(1847).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},5299:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(1847).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},5664:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(1847).A)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]])},5917:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(1847).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},6132:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(1847).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},7910:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(1847).A)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},7937:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(1847).A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},8222:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>b});var r=s(5155),a=s(2115),i=s(63),l=s(2619),n=s.n(l),c=s(5299),o=s(5917),d=s(7910),m=s(5229),x=s(5664),h=s(6132),u=s(7937),p=s(1786),f=s(5380);let g=[{title:"Frente do CRECI",description:"Foto clara da frente do seu documento CRECI",icon:"\uD83D\uDCC4"},{title:"Verso do CRECI",description:"Foto clara do verso do seu documento CRECI",icon:"\uD83D\uDCC4"},{title:"Selfie com Documento",description:"Tire uma selfie segurando seu CRECI pr\xf3ximo ao rosto",icon:"\uD83E\uDD33"}];function b(){let e=(0,i.useRouter)(),t=(0,i.useSearchParams)(),{user:s,isAuthenticated:l,isLoading:b}=(0,f.A)(),v=(0,a.useRef)(null),[y,j]=(0,a.useState)(0),[N,w]=(0,a.useState)([null,null,null]),[k,C]=(0,a.useState)(!1),[A,E]=(0,a.useState)(null),[R,S]=(0,a.useState)(!1),[I,P]=(0,a.useState)(null),M=t.get("creci")||"";(0,a.useEffect)(()=>{let e=localStorage.getItem("token");e&&P(e)},[]),(0,a.useEffect)(()=>{b||l||e.push("/login?redirect=/verificacao")},[b,l,e]);let _=async()=>{if(N.some(e=>!e))return void E("Por favor, adicione todas as imagens necess\xe1rias.");if(!M)return void E("CRECI n\xe3o informado. Volte ao perfil e informe seu CRECI.");C(!0),E(null);try{let t=new FormData;t.append("creci",M),t.append("creci_front",N[0].file),t.append("creci_back",N[1].file),t.append("selfie",N[2].file);let s=await fetch("".concat("https://backend-production-6acc.up.railway.app","/auth/broker-docs"),{method:"POST",headers:{Authorization:"Bearer ".concat(I)},body:t});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error(e.message||"Erro ao enviar documentos")}S(!0),setTimeout(()=>{e.push("/perfil")},3e3)}catch(e){E(e.message||"Erro ao enviar documentos. Tente novamente.")}finally{C(!1)}};return b?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 pt-20 flex items-center justify-center",children:(0,r.jsx)(c.A,{className:"w-8 h-8 animate-spin text-primary-600"})}):l?R?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 pt-20 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"max-w-md w-full text-center",children:[(0,r.jsx)("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,r.jsx)(o.A,{className:"w-10 h-10 text-green-600"})}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Documentos Enviados!"}),(0,r.jsx)("p",{className:"text-gray-600 mb-8",children:"Seus documentos foram enviados com sucesso. Nossa equipe ir\xe1 analis\xe1-los e voc\xea receber\xe1 uma notifica\xe7\xe3o quando sua conta for verificada."}),(0,r.jsx)(n(),{href:"/perfil",className:"inline-flex items-center gap-2 px-6 py-3 bg-primary-600 text-white rounded-lg font-semibold hover:bg-primary-700 transition-colors",children:"Voltar ao Perfil"})]})}):(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-primary-900 via-primary-800 to-primary-900 pt-20 pb-12",children:(0,r.jsxs)("div",{className:"max-w-2xl mx-auto px-4",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-white/10 rounded-2xl flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)(d.A,{className:"w-8 h-8 text-yellow-400"})}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-white mb-2",children:"Verifica\xe7\xe3o de Corretor"}),(0,r.jsx)("p",{className:"text-white/70",children:"Envie as fotos do seu CRECI para verificar sua conta"})]}),(0,r.jsx)("div",{className:"flex items-center justify-center gap-2 mb-8",children:g.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center font-semibold transition-all ".concat(t<y?"bg-green-500 text-white":t===y?"bg-yellow-400 text-primary-900":"bg-white/20 text-white/50"),children:t<y?(0,r.jsx)(o.A,{className:"w-5 h-5"}):t+1}),t<g.length-1&&(0,r.jsx)("div",{className:"w-12 h-1 mx-1 rounded ".concat(t<y?"bg-green-500":"bg-white/20")})]},t))}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-xl",children:[(0,r.jsxs)("div",{className:"text-center mb-6",children:[(0,r.jsx)("span",{className:"text-4xl mb-4 block",children:g[y].icon}),(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:g[y].title}),(0,r.jsx)("p",{className:"text-gray-600",children:g[y].description})]}),(0,r.jsxs)("div",{className:"mb-6",children:[N[y]?(0,r.jsxs)("div",{className:"relative aspect-[4/3] rounded-xl overflow-hidden bg-gray-100",children:[(0,r.jsx)("img",{src:N[y].preview,alt:"Preview",className:"w-full h-full object-cover"}),(0,r.jsx)("button",{onClick:()=>(e=>{var t;let s=[...N];(null==(t=s[e])?void 0:t.preview)&&URL.revokeObjectURL(s[e].preview),s[e]=null,w(s)})(y),className:"absolute top-3 right-3 w-10 h-10 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 transition-colors",children:(0,r.jsx)(m.A,{className:"w-5 h-5"})}),(0,r.jsxs)("div",{className:"absolute bottom-3 left-3 right-3 bg-green-500/90 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[(0,r.jsx)(o.A,{className:"w-4 h-4"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"Imagem selecionada"})]})]}):(0,r.jsxs)("button",{onClick:()=>{var e;return null==(e=v.current)?void 0:e.click()},className:"w-full aspect-[4/3] border-2 border-dashed border-gray-300 rounded-xl flex flex-col items-center justify-center gap-4 hover:border-primary-500 hover:bg-primary-50 transition-colors cursor-pointer",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center",children:(0,r.jsx)(x.A,{className:"w-8 h-8 text-gray-400"})}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-gray-900 font-medium",children:"Clique para adicionar imagem"}),(0,r.jsx)("p",{className:"text-gray-500 text-sm mt-1",children:"PNG, JPG at\xe9 5MB"})]})]}),(0,r.jsx)("input",{ref:v,type:"file",accept:"image/*",capture:"environment",onChange:e=>{var t;let s=null==(t=e.target.files)?void 0:t[0];if(!s)return;if(!s.type.startsWith("image/"))return void E("Por favor, selecione uma imagem v\xe1lida.");if(s.size>5242880)return void E("A imagem deve ter no m\xe1ximo 5MB.");let r=URL.createObjectURL(s),a=[...N];a[y]={file:s,preview:r},w(a),E(null)},className:"hidden"})]}),A&&(0,r.jsxs)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center gap-3 text-red-700",children:[(0,r.jsx)(h.A,{className:"w-5 h-5 flex-shrink-0"}),(0,r.jsx)("span",{className:"text-sm",children:A})]}),(0,r.jsxs)("div",{className:"flex gap-4",children:[y>0&&(0,r.jsx)("button",{onClick:()=>{y>0&&(j(y-1),E(null))},className:"flex-1 py-3 px-6 border border-gray-300 text-gray-700 rounded-xl font-semibold hover:bg-gray-50 transition-colors",children:"Voltar"}),y<g.length-1?(0,r.jsxs)("button",{onClick:()=>{if(!N[y])return void E("Por favor, adicione a imagem antes de continuar.");y<g.length-1&&(j(y+1),E(null))},disabled:!N[y],className:"flex-1 py-3 px-6 bg-primary-600 text-white rounded-xl font-semibold hover:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:["Continuar",(0,r.jsx)(u.A,{className:"w-5 h-5"})]}):(0,r.jsx)("button",{onClick:_,disabled:k||!N[y],className:"flex-1 py-3 px-6 bg-green-600 text-white rounded-xl font-semibold hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:k?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.A,{className:"w-5 h-5 animate-spin"}),"Enviando..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.A,{className:"w-5 h-5"}),"Enviar para An\xe1lise"]})})]})]}),(0,r.jsx)("div",{className:"text-center mt-6",children:(0,r.jsx)(n(),{href:"/perfil",className:"text-white/70 hover:text-white text-sm transition-colors",children:"Enviar documentos depois"})})]})}):null}}},e=>{e.O(0,[563,619,697,380,441,255,358],()=>e(e.s=4588)),_N_E=e.O()}]);