(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[531],{1424:(e,s,a)=>{Promise.resolve().then(a.bind(a,3296))},1761:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(1847).A)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},2529:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(1847).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},3296:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>f});var t=a(5155),l=a(2115),r=a(63),i=a(2529),c=a(1847);let d=(0,c.A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),n=(0,c.A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),o=(0,c.A)("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);var x=a(1761),m=a(9408),h=a(6132);let p=(0,c.A)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);var g=a(9559);let y=(0,c.A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);var u=a(5993),b=a(6485);let j=(0,c.A)("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);var v=a(5380),N=a(960);function f(){let e=(0,r.useRouter)(),{user:s,isAuthenticated:a,isLoading:c}=(0,v.A)(),[f,k]=(0,l.useState)(!0),[w,A]=(0,l.useState)(!1),[_,M]=(0,l.useState)(null),[C,E]=(0,l.useState)([]),[R,S]=(0,l.useState)(null);(0,l.useEffect)(()=>{c||a||e.push("/login?redirect=/relatorios")},[c,a,e]),(0,l.useEffect)(()=>{s&&"broker"===s.role&&q()},[s]);let q=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e?A(!0):k(!0),S(null);try{var s,a;let e=localStorage.getItem("token");if(!e)throw Error("Token n\xe3o encontrado");let[t,l]=await Promise.all([N.aE.getPerformanceReport(e),N.aE.getCommissions(e)]);(null==(s=t.data)?void 0:s.data)&&M(t.data.data),(null==(a=l.data)?void 0:a.data)&&E(l.data.data)}catch(e){console.error("Erro ao buscar relat\xf3rios:",e),S("Erro ao carregar os relat\xf3rios. Tente novamente.")}finally{k(!1),A(!1)}},z=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e);return c?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 pt-20 flex items-center justify-center",children:(0,t.jsx)("div",{className:"w-8 h-8 border-4 border-primary-500 border-t-transparent rounded-full animate-spin"})}):a?(null==s?void 0:s.role)!=="broker"?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 pt-20 pb-12",children:(0,t.jsxs)("div",{className:"max-w-2xl mx-auto px-4 text-center py-20",children:[(0,t.jsx)(h.A,{className:"w-16 h-16 text-yellow-500 mx-auto mb-4"}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Acesso Restrito"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:"Esta p\xe1gina \xe9 exclusiva para corretores. Se voc\xea \xe9 corretor, finalize seu cadastro para ter acesso aos relat\xf3rios."}),(0,t.jsx)("button",{onClick:()=>e.push("/perfil"),className:"px-6 py-3 bg-primary-900 hover:bg-primary-800 text-white font-semibold rounded-xl transition-colors",children:"Ir para o Perfil"})]})}):(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 pt-20 pb-12",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:[(0,t.jsx)(p,{className:"w-7 h-7 text-primary-600"}),"Relat\xf3rios"]}),(0,t.jsx)("p",{className:"text-gray-500 text-sm mt-1",children:"Acompanhe sua performance e comiss\xf5es"})]}),(0,t.jsxs)("button",{onClick:()=>q(!0),disabled:w,className:"inline-flex items-center gap-2 px-4 py-2 bg-white border border-gray-200 hover:bg-gray-50 text-gray-700 font-medium rounded-xl transition-colors disabled:opacity-50",children:[(0,t.jsx)(g.A,{className:"w-4 h-4 ".concat(w?"animate-spin":"")}),"Atualizar"]})]}),R&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl mb-6",children:R}),f?(0,t.jsx)("div",{className:"text-center py-20",children:(0,t.jsx)("div",{className:"w-10 h-10 border-4 border-primary-500 border-t-transparent rounded-full animate-spin mx-auto"})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-8",children:[(0,t.jsx)("div",{className:"bg-white rounded-2xl p-6 border border-gray-100 shadow-sm",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:(0,t.jsx)(m.A,{className:"w-6 h-6 text-blue-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Total de Im\xf3veis"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(null==_?void 0:_.totalProperties)||0})]})]})}),(0,t.jsx)("div",{className:"bg-white rounded-2xl p-6 border border-gray-100 shadow-sm",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center",children:(0,t.jsx)(y,{className:"w-6 h-6 text-green-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Neg\xf3cios Fechados"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(null==_?void 0:_.totalDeals)||0}),(0,t.jsxs)("p",{className:"text-xs text-gray-400 mt-0.5",children:[(null==_?void 0:_.totalSales)||0," vendas â€¢ ",(null==_?void 0:_.totalRents)||0," alugu\xe9is"]})]})]})}),(0,t.jsx)("div",{className:"bg-white rounded-2xl p-6 border border-gray-100 shadow-sm sm:col-span-2 lg:col-span-1",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-accent-100 rounded-xl flex items-center justify-center",children:(0,t.jsx)(x.A,{className:"w-6 h-6 text-accent-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Comiss\xf5es Acumuladas"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-green-600",children:z((null==_?void 0:_.totalCommission)||0)})]})]})})]}),(null==_?void 0:_.statusBreakdown)&&Object.keys(_.statusBreakdown).length>0&&(0,t.jsxs)("div",{className:"bg-white rounded-2xl p-6 border border-gray-100 mb-8",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,t.jsx)(u.A,{className:"w-5 h-5 text-gray-400"}),"Status dos Im\xf3veis"]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-3",children:Object.entries(_.statusBreakdown).map(e=>{let[s,a]=e,{label:l,color:r,icon:c}={approved:{label:"Dispon\xedveis",color:"bg-green-100 text-green-700",icon:i.A},pending_approval:{label:"Em An\xe1lise",color:"bg-yellow-100 text-yellow-700",icon:d},rejected:{label:"Rejeitados",color:"bg-red-100 text-red-700",icon:n},rented:{label:"Alugados",color:"bg-blue-100 text-blue-700",icon:o},sold:{label:"Vendidos",color:"bg-purple-100 text-purple-700",icon:x.A}}[s]||{label:s,color:"bg-gray-100 text-gray-700",icon:m.A};return(0,t.jsxs)("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full ".concat(r),children:[(0,t.jsx)(c,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"font-medium",children:l}),(0,t.jsx)("span",{className:"font-bold",children:a})]},s)})})]}),(0,t.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-100 overflow-hidden",children:[(0,t.jsx)("div",{className:"p-6 border-b border-gray-100",children:(0,t.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[(0,t.jsx)(x.A,{className:"w-5 h-5 text-gray-400"}),"Hist\xf3rico de Comiss\xf5es"]})}),C.length>0?(0,t.jsx)("div",{className:"divide-y divide-gray-100",children:C.map(e=>(0,t.jsxs)("div",{className:"p-5 hover:bg-gray-50 transition-colors",children:[(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900 mb-1",children:e.title}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-3 text-sm text-gray-500",children:[(0,t.jsx)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full ".concat("sale"===e.deal_type?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"),children:"sale"===e.deal_type?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.A,{className:"w-3 h-3"})," Venda"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o,{className:"w-3 h-3"})," Aluguel"]})}),e.is_recurring&&(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 text-green-600",children:[(0,t.jsx)(g.A,{className:"w-3 h-3"}),"Recorrente (",e.recurrence_interval||"mensal",")"]}),(0,t.jsxs)("span",{className:"inline-flex items-center gap-1",children:[(0,t.jsx)(b.A,{className:"w-3 h-3"}),new Date(e.sale_date).toLocaleDateString("pt-BR")]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 lg:gap-6 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-gray-400 text-xs",children:"Valor do Neg\xf3cio"}),(0,t.jsx)("p",{className:"font-semibold text-gray-900",children:z(Number(e.sale_price))})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"text-gray-400 text-xs flex items-center gap-1",children:[(0,t.jsx)(j,{className:"w-3 h-3"})," Taxa"]}),(0,t.jsxs)("p",{className:"font-semibold text-gray-900",children:[Number(e.commission_rate).toFixed(1),"%"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-gray-400 text-xs",children:"Ciclos"}),(0,t.jsx)("p",{className:"font-semibold text-gray-900",children:e.commission_cycles_total})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-gray-400 text-xs",children:"Total Comiss\xe3o"}),(0,t.jsx)("p",{className:"font-bold text-green-600",children:z(e.commission_amount_total)})]})]})]}),(Number(e.condominio_value)>0||Number(e.iptu_value)>0)&&(0,t.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-100 flex gap-4 text-xs text-gray-500",children:[Number(e.condominio_value)>0&&(0,t.jsxs)("span",{children:["Condom\xednio: ",z(Number(e.condominio_value))]}),Number(e.iptu_value)>0&&(0,t.jsxs)("span",{children:["IPTU: ",z(Number(e.iptu_value))]})]})]},e.id))}):(0,t.jsxs)("div",{className:"p-12 text-center",children:[(0,t.jsx)(x.A,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),(0,t.jsx)("p",{className:"text-gray-500",children:"Nenhuma comiss\xe3o registrada ainda."}),(0,t.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Feche seu primeiro neg\xf3cio para ver o hist\xf3rico aqui."})]})]})]})]})}):null}},5993:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(1847).A)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},6132:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(1847).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},6485:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(1847).A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},9408:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(1847).A)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},9559:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(1847).A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])}},e=>{e.O(0,[563,697,380,441,255,358],()=>e(e.s=1424)),_N_E=e.O()}]);