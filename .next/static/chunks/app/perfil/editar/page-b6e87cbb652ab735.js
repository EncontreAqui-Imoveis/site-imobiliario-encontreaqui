(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[481],{1873:(e,r,a)=>{"use strict";a.d(r,{A:()=>t});let t=(0,a(1847).A)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},3626:(e,r,a)=>{Promise.resolve().then(a.bind(a,9274))},5299:(e,r,a)=>{"use strict";a.d(r,{A:()=>t});let t=(0,a(1847).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},5626:(e,r,a)=>{"use strict";a.d(r,{A:()=>t});let t=(0,a(1847).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},6046:(e,r,a)=>{"use strict";a.d(r,{A:()=>t});let t=(0,a(1847).A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},9141:(e,r,a)=>{"use strict";a.d(r,{A:()=>t});let t=(0,a(1847).A)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},9274:(e,r,a)=>{"use strict";a.d(r,{default:()=>g});var t=a(5155),s=a(2115),l=a(63),i=a(5380),o=a(5299),n=a(5626),c=a(9141),d=a(1873),m=a(9408),p=a(6046);let x=e=>{let r=e.replace(/\D/g,"");return r.length<=2?r:r.length<=7?"(".concat(r.slice(0,2),") ").concat(r.slice(2)):"(".concat(r.slice(0,2),") ").concat(r.slice(2,7),"-").concat(r.slice(7,11))},h=e=>{let r=e.replace(/\D/g,"");return r.length<=5?r:"".concat(r.slice(0,5),"-").concat(r.slice(5,8))},u=e=>e.replace(/\D/g,""),b=["AC","AL","AP","AM","BA","CE","DF","ES","GO","MA","MT","MS","MG","PA","PB","PR","PE","PI","RJ","RN","RS","RO","RR","SC","SP","SE","TO"];function g(){let e=(0,l.useRouter)(),{user:r,updateProfile:a,isAuthenticated:g,isLoading:y}=(0,i.A)(),[f,j]=(0,s.useState)(!1),[v,N]=(0,s.useState)(""),[w,k]=(0,s.useState)({name:"",email:"",phone:"",street:"",number:"",complement:"",bairro:"",city:"",state:"",cep:"",creci:""});(0,s.useEffect)(()=>{if(!y&&!g)return void e.push("/login?redirect=/perfil/editar");r&&k({name:r.name||"",email:r.email||"",phone:r.phone?x(r.phone.replace("+55","")):"",street:r.street||"",number:r.number||"",complement:r.complement||"",bairro:r.bairro||"",city:r.city||"",state:r.state||"",cep:r.cep?h(r.cep):"",creci:r.creci||""})},[r,y,g,e]);let A=e=>{let{name:r,value:a}=e.target,t=a;"phone"===r&&(t=x(a)),"cep"===r&&(t=h(a)),k(e=>({...e,[r]:t}))},C=async t=>{if(t.preventDefault(),!w.phone||u(w.phone).length<10?(N("Telefone v\xe1lido \xe9 obrigat\xf3rio"),!1):w.street&&w.number&&w.bairro&&w.city&&w.state&&w.cep?(null==r?void 0:r.role)!=="broker"||!!w.creci&&!(w.creci.length<4)||(N("CRECI \xe9 obrigat\xf3rio para corretores"),!1):(N("Endere\xe7o completo \xe9 obrigat\xf3rio"),!1)){j(!0),N("");try{let t={phone:"+55".concat(u(w.phone)),street:w.street,number:w.number,complement:w.complement,bairro:w.bairro,city:w.city,state:w.state,cep:u(w.cep),creci:(null==r?void 0:r.role)==="broker"?w.creci:void 0},s=await a(t);if(!s.success)throw Error(s.error||"Erro ao atualizar perfil");t.phone&&(null==r?void 0:r.phone)!==t.phone?e.push("/cadastro/verificar-telefone"):e.push("/")}catch(e){N(e.message||"Erro ao salvar altera\xe7\xf5es")}finally{j(!1)}}},E=async()=>{let e=u(w.cep);if(8===e.length)try{let r=await fetch("https://viacep.com.br/ws/".concat(e,"/json/")),a=await r.json();a.erro||k(e=>({...e,street:a.logradouro,bairro:a.bairro,city:a.localidade,state:a.uf}))}catch(e){console.error("Error fetching CEP:",e)}};return y?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)(o.A,{className:"animate-spin"})}):(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 pt-24 pb-12",children:(0,t.jsxs)("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsxs)("button",{onClick:()=>e.back(),className:"flex items-center text-gray-600 hover:text-gray-900 transition-colors",children:[(0,t.jsx)(n.A,{className:"w-5 h-5 mr-2"}),"Voltar"]})}),(0,t.jsx)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:(0,t.jsxs)("div",{className:"p-8",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Completar Cadastro"}),(0,t.jsx)("p",{className:"text-gray-500 mb-8",children:"Precisamos de alguns dados adicionais para finalizar seu perfil."}),v&&(0,t.jsxs)("div",{className:"mb-6 p-4 bg-red-50 text-red-700 rounded-xl text-sm border border-red-100 flex items-center",children:[(0,t.jsx)("span",{className:"mr-2",children:"⚠️"})," ",v]}),(0,t.jsxs)("form",{onSubmit:C,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Nome"}),(0,t.jsx)("input",{id:"name",type:"text",value:w.name,disabled:!0,className:"w-full bg-gray-50 border border-gray-200 rounded-xl px-4 py-2.5 text-gray-500 cursor-not-allowed"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Email"}),(0,t.jsx)("input",{id:"email",type:"text",value:w.email,disabled:!0,className:"w-full bg-gray-50 border border-gray-200 rounded-xl px-4 py-2.5 text-gray-500 cursor-not-allowed"})]})]}),(0,t.jsx)("div",{className:"border-t border-gray-100 my-6"}),(0,t.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[(0,t.jsx)(c.A,{className:"w-5 h-5 text-gray-400"}),"Contato"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Telefone Celular"}),(0,t.jsx)("input",{id:"phone",type:"tel",name:"phone",value:w.phone,onChange:A,placeholder:"(00) 00000-0000",className:"w-full bg-white border border-gray-200 rounded-xl px-4 py-2.5 text-gray-900 focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all"})]}),(0,t.jsx)("div",{className:"border-t border-gray-100 my-6"}),(0,t.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[(0,t.jsx)(d.A,{className:"w-5 h-5 text-gray-400"}),"Endere\xe7o"]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"cep",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"CEP"}),(0,t.jsx)("input",{id:"cep",type:"text",name:"cep",value:w.cep,onChange:A,onBlur:E,placeholder:"00000-000",className:"w-full bg-white border border-gray-200 rounded-xl px-4 py-2.5 text-gray-900 focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"state",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Estado"}),(0,t.jsxs)("select",{id:"state",name:"state",value:w.state,onChange:A,className:"w-full bg-white border border-gray-200 rounded-xl px-4 py-2.5 text-gray-900 focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all appearance-none",children:[(0,t.jsx)("option",{value:"",children:"Selecione..."}),b.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Cidade"}),(0,t.jsx)("input",{id:"city",type:"text",name:"city",value:w.city,onChange:A,className:"w-full bg-white border border-gray-200 rounded-xl px-4 py-2.5 text-gray-900 focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all"})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)("label",{htmlFor:"street",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Logradouro"}),(0,t.jsx)("input",{id:"street",type:"text",name:"street",value:w.street,onChange:A,className:"w-full bg-white border border-gray-200 rounded-xl px-4 py-2.5 text-gray-900 focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"number",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"N\xfamero"}),(0,t.jsx)("input",{id:"number",type:"text",name:"number",value:w.number,onChange:A,className:"w-full bg-white border border-gray-200 rounded-xl px-4 py-2.5 text-gray-900 focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"complement",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Complemento"}),(0,t.jsx)("input",{id:"complement",type:"text",name:"complement",value:w.complement,onChange:A,className:"w-full bg-white border border-gray-200 rounded-xl px-4 py-2.5 text-gray-900 focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all"})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)("label",{htmlFor:"bairro",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Bairro"}),(0,t.jsx)("input",{id:"bairro",type:"text",name:"bairro",value:w.bairro,onChange:A,className:"w-full bg-white border border-gray-200 rounded-xl px-4 py-2.5 text-gray-900 focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all"})]})]}),(null==r?void 0:r.role)==="broker"&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"border-t border-gray-100 my-6"}),(0,t.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[(0,t.jsx)(m.A,{className:"w-5 h-5 text-gray-400"}),"Dados Profissionais"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"creci",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"CRECI"}),(0,t.jsx)("input",{id:"creci",type:"text",name:"creci",value:w.creci,onChange:A,placeholder:"00000-F",className:"w-full bg-white border border-gray-200 rounded-xl px-4 py-2.5 text-gray-900 focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all"})]})]}),(0,t.jsx)("div",{className:"pt-4",children:(0,t.jsx)("button",{type:"submit",disabled:f,className:"w-full flex items-center justify-center gap-2 bg-primary-900 hover:bg-primary-800 text-white font-semibold py-3.5 px-6 rounded-xl transition-all shadow-lg shadow-primary-900/20 disabled:opacity-70 disabled:cursor-not-allowed",children:f?(0,t.jsx)(o.A,{className:"w-5 h-5 animate-spin"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.A,{className:"w-5 h-5"}),"Salvar Altera\xe7\xf5es"]})})})]})]})})]})})}},9408:(e,r,a)=>{"use strict";a.d(r,{A:()=>t});let t=(0,a(1847).A)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])}},e=>{e.O(0,[563,697,380,441,255,358],()=>e(e.s=3626)),_N_E=e.O()}]);