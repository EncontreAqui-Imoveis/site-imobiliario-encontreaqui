(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[417],{1786:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(1847).A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},2529:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(1847).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},2987:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(1847).A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},4123:(e,t,s)=>{Promise.resolve().then(s.bind(s,4136))},4136:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>w});var r=s(5155),a=s(2115),i=s(63),l=s(2619),c=s.n(l),n=s(2529),d=s(5917),o=s(6132),h=s(5229),x=s(5664);let m=(0,s(1847).A)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);var u=s(1786),f=s(2987),p=s(5626),b=s(5380),j=s(960);let g=[{id:"creci-front",title:"Dados do CRECI",description:"Tire uma foto da frente do seu CRECI mostrando seus dados.",icon:"\uD83D\uDCC4"},{id:"creci-back",title:"Verso do CRECI",description:"Tire uma foto do verso do seu CRECI.",icon:"\uD83D\uDD04"},{id:"selfie",title:"Selfie com Documento",description:"Segure o CRECI pr\xf3ximo ao rosto, garantindo que ambos estejam n\xedtidos.",icon:"\uD83E\uDD33"}];function w(){let e=(0,i.useRouter)(),t=(0,i.useSearchParams)(),{user:s,isAuthenticated:l,isLoading:w}=(0,b.A)(),[v,y]=(0,a.useState)(!0),[N,k]=(0,a.useState)(0),[A,C]=(0,a.useState)(!1),[E,R]=(0,a.useState)(null),[L,S]=(0,a.useState)(!1),[F,U]=(0,a.useState)({creciFront:null,creciBack:null,selfie:null}),[B,I]=(0,a.useState)({creciFront:null,creciBack:null,selfie:null}),q=(0,a.useRef)(null),M=(0,a.useRef)(null),O=t.get("creci")||"";(0,a.useEffect)(()=>{if(!w){if(!l)return void e.replace("/login?redirect=/perfil/verificar-documentos");y(!1)}},[w,l,e]),(0,a.useEffect)(()=>()=>{Object.values(B).forEach(e=>{e&&URL.revokeObjectURL(e)})},[]);let z=()=>{switch(N){case 0:default:return"creciFront";case 1:return"creciBack";case 2:return"selfie"}},P=e=>{var t;let s=null==(t=e.target.files)?void 0:t[0];s&&(e=>{if(!e)return;let t=z();B[t]&&URL.revokeObjectURL(B[t]);let s=URL.createObjectURL(e);U(s=>({...s,[t]:e})),I(e=>({...e,[t]:s})),R(null)})(s),e.target.value=""},_=async()=>{if(!F.creciFront||!F.creciBack||!F.selfie)return void R("Por favor, envie todas as tr\xeas imagens.");C(!0),R(null);try{await j.authApi.uploadBrokerDocuments({creci:O,creciFront:F.creciFront,creciBack:F.creciBack,selfie:F.selfie}),S(!0)}catch(e){R(e.message||"Erro ao enviar documentos. Tente novamente.")}finally{C(!1)}};if(v||w)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center gradient-hero",children:(0,r.jsx)("div",{className:"w-8 h-8 border-4 border-accent-500 border-t-transparent rounded-full animate-spin"})});if(L)return(0,r.jsx)("main",{className:"min-h-screen gradient-hero flex items-center justify-center px-4 py-12 pt-24",children:(0,r.jsx)("div",{className:"relative z-10 w-full max-w-md",children:(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-xl rounded-3xl p-8 shadow-2xl border border-white/20 text-center",children:[(0,r.jsx)("div",{className:"w-20 h-20 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,r.jsx)(n.A,{className:"w-12 h-12 text-green-400"})}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-white mb-3",children:"Documentos Enviados!"}),(0,r.jsx)("p",{className:"text-white/70 mb-6",children:"Seus documentos foram enviados com sucesso. Nossa equipe ir\xe1 analisar e voc\xea receber\xe1 uma notifica\xe7\xe3o quando for aprovado."}),(0,r.jsx)(c(),{href:"/perfil",className:"w-full py-4 bg-accent-500 hover:bg-accent-600 text-primary-900 font-semibold rounded-xl shadow-lg shadow-accent-500/25 transition-all duration-200 flex items-center justify-center gap-2",children:"Voltar ao Perfil"})]})})});let V=B[z()];return(0,r.jsxs)("main",{className:"min-h-screen gradient-hero flex items-center justify-center px-4 py-12 pt-24",children:[(0,r.jsx)("input",{ref:q,type:"file",accept:"image/*",capture:"environment",onChange:P,className:"hidden"}),(0,r.jsx)("input",{ref:M,type:"file",accept:"image/*",onChange:P,className:"hidden"}),(0,r.jsx)("div",{className:"relative z-10 w-full max-w-md",children:(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-xl rounded-3xl p-6 sm:p-8 shadow-2xl border border-white/20",children:[(0,r.jsxs)("div",{className:"text-center mb-6",children:[(0,r.jsx)("h1",{className:"text-xl font-bold text-white mb-2",children:"Verifica\xe7\xe3o de Corretor"}),(0,r.jsx)("p",{className:"text-white/60 text-sm",children:"Envie as fotos do seu CRECI para verifica\xe7\xe3o"})]}),(0,r.jsx)("div",{className:"flex items-center justify-center mb-8",children:g.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-sm font-bold transition-colors ".concat(t<N?"bg-green-500 text-white":t===N?"bg-accent-500 text-primary-900":"bg-white/20 text-white/50"),children:t<N?(0,r.jsx)(d.A,{className:"w-5 h-5"}):t+1}),t<g.length-1&&(0,r.jsx)("div",{className:"w-8 sm:w-12 h-1 mx-1 rounded-full transition-colors ".concat(t<N?"bg-green-500":"bg-white/20")})]},e.id))}),(0,r.jsxs)("div",{className:"text-center mb-6",children:[(0,r.jsx)("div",{className:"text-4xl mb-3",children:g[N].icon}),(0,r.jsx)("h2",{className:"text-lg font-semibold text-white mb-2",children:g[N].title}),(0,r.jsx)("p",{className:"text-white/60 text-sm",children:g[N].description})]}),E&&(0,r.jsxs)("div",{className:"mb-6 p-4 bg-red-500/20 border border-red-500/30 rounded-xl flex items-start gap-3",children:[(0,r.jsx)(o.A,{className:"w-5 h-5 text-red-400 mt-0.5 flex-shrink-0"}),(0,r.jsx)("p",{className:"text-red-200 text-sm",children:E})]}),(0,r.jsx)("div",{className:"mb-6",children:V?(0,r.jsxs)("div",{className:"relative aspect-[4/3] rounded-2xl overflow-hidden border-2 border-accent-500",children:[(0,r.jsx)("img",{src:V,alt:"Preview",className:"w-full h-full object-cover"}),(0,r.jsx)("button",{onClick:()=>{let e=z();B[e]&&URL.revokeObjectURL(B[e]),U(t=>({...t,[e]:null})),I(t=>({...t,[e]:null}))},className:"absolute top-3 right-3 w-10 h-10 bg-red-500 rounded-full flex items-center justify-center shadow-lg hover:bg-red-600 transition-colors",children:(0,r.jsx)(h.A,{className:"w-5 h-5 text-white"})}),(0,r.jsxs)("div",{className:"absolute bottom-3 left-3 px-3 py-1.5 bg-green-500 rounded-full flex items-center gap-2",children:[(0,r.jsx)(d.A,{className:"w-4 h-4 text-white"}),(0,r.jsx)("span",{className:"text-white text-sm font-medium",children:"Imagem selecionada"})]})]}):(0,r.jsxs)("div",{className:"aspect-[4/3] rounded-2xl border-2 border-dashed border-white/30 bg-white/5 flex flex-col items-center justify-center gap-4",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-white/10 rounded-full flex items-center justify-center",children:(0,r.jsx)(x.A,{className:"w-8 h-8 text-white/50"})}),(0,r.jsx)("p",{className:"text-white/50 text-sm",children:"Clique abaixo para adicionar"})]})}),!V&&(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[(0,r.jsxs)("button",{onClick:()=>{q.current&&q.current.click()},className:"py-3 px-4 bg-white/10 hover:bg-white/20 border border-white/20 rounded-xl text-white flex items-center justify-center gap-2 transition-colors",children:[(0,r.jsx)(x.A,{className:"w-5 h-5"}),(0,r.jsx)("span",{children:"C\xe2mera"})]}),(0,r.jsxs)("button",{onClick:()=>{M.current&&M.current.click()},className:"py-3 px-4 bg-white/10 hover:bg-white/20 border border-white/20 rounded-xl text-white flex items-center justify-center gap-2 transition-colors",children:[(0,r.jsx)(m,{className:"w-5 h-5"}),(0,r.jsx)("span",{children:"Galeria"})]})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("button",{onClick:()=>{if(null===F[z()])return void R("Por favor, adicione a imagem antes de continuar.");N<g.length-1?(k(e=>e+1),R(null)):_()},disabled:A,className:"w-full py-4 bg-accent-500 hover:bg-accent-600 text-primary-900 font-semibold rounded-xl shadow-lg shadow-accent-500/25 transition-all duration-200 flex items-center justify-center gap-2 disabled:opacity-50",children:A?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-5 h-5 border-2 border-primary-900 border-t-transparent rounded-full animate-spin"}),"Enviando..."]}):N===g.length-1?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.A,{className:"w-5 h-5"}),"Enviar para An\xe1lise"]}):(0,r.jsxs)(r.Fragment,{children:["Continuar",(0,r.jsx)(f.A,{className:"w-5 h-5"})]})}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsxs)("button",{onClick:()=>{N>0?(k(e=>e-1),R(null)):e.back()},className:"flex-1 py-3 border border-white/30 text-white hover:bg-white/10 rounded-xl transition-colors flex items-center justify-center gap-2",children:[(0,r.jsx)(p.A,{className:"w-4 h-4"}),"Voltar"]}),(0,r.jsx)("button",{onClick:()=>{e.push("/perfil")},className:"flex-1 py-3 text-white/60 hover:text-white transition-colors",children:"Enviar depois"})]})]})]})})]})}},5229:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(1847).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},5626:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(1847).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},5664:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(1847).A)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]])},5917:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(1847).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},6132:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(1847).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])}},e=>{e.O(0,[563,619,697,380,441,255,358],()=>e(e.s=4123)),_N_E=e.O()}]);