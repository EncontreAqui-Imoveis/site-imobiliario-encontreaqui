(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[247],{893:(e,t,a)=>{Promise.resolve().then(a.bind(a,6778))},2987:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(1847).A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},3935:(e,t,a)=>{"use strict";a.d(t,{J:()=>o,T:()=>c});var r=a(5155),l=a(2115);let s="registration_draft",i={name:"",email:"",password:"",phone:"",street:"",number:"",complement:"",bairro:"",city:"",state:"",cep:"",creci:""},n=(0,l.createContext)(void 0);function o(e){var t,a,o;let{children:c}=e,[d,u]=(0,l.useState)(null),[h,m]=(0,l.useState)(!0);(0,l.useEffect)(()=>{try{let e=localStorage.getItem(s);if(e){let t=JSON.parse(e);t.authData&&(t.authData.password=""),u(t)}}catch(e){console.error("Failed to load registration draft:",e),localStorage.removeItem(s)}finally{m(!1)}},[]);let p=(0,l.useCallback)(e=>{try{let t={...e,authData:{...e.authData,password:""},updatedAt:new Date().toISOString()};localStorage.setItem(s,JSON.stringify(t))}catch(e){console.error("Failed to persist registration draft:",e)}},[]),x=(0,l.useCallback)(e=>{u(t=>{var a,r,l,s,n,o;let c={step:null!=(r=null!=(a=e.step)?a:null==t?void 0:t.step)?r:"form",userType:null!=(s=null!=(l=e.userType)?l:null==t?void 0:t.userType)?s:"client",authData:{...null!=(n=null==t?void 0:t.authData)?n:i,...null!=(o=e.authData)?o:{}},updatedAt:new Date().toISOString()};return p(c),c})},[p]),f=(0,l.useCallback)(e=>{u(t=>{if(!t)return t;let a={...t,step:e,updatedAt:new Date().toISOString()};return p(a),a})},[p]),b=(0,l.useCallback)(e=>{u(t=>{if(!t)return t;let a={...t,authData:{...t.authData,...e},updatedAt:new Date().toISOString()};return p(a),a})},[p]),v=(0,l.useCallback)(()=>{localStorage.removeItem(s),u(null)},[]),g=(0,l.useCallback)(()=>null!==d&&"form"!==d.step,[d]),w={draft:d,isLoading:h,saveDraft:x,updateStep:f,updateAuthData:b,clearDraft:v,hasDraft:g,currentStep:null!=(t=null==d?void 0:d.step)?t:null,authData:null!=(a=null==d?void 0:d.authData)?a:null,userType:null!=(o=null==d?void 0:d.userType)?o:null};return(0,r.jsx)(n.Provider,{value:w,children:c})}function c(){let e=(0,l.useContext)(n);if(void 0===e)throw Error("useRegistration must be used within a RegistrationProvider");return e}},6132:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(1847).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},6778:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>f});var r=a(5155),l=a(2115),s=a(63),i=a(5239),n=a(2619),o=a.n(n),c=a(8435),d=a(6132);let u=(0,a(1847).A)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);var h=a(2987),m=a(3935),p=a(5380),x=a(960);function f(){let e=(0,s.useRouter)(),{draft:t,updateStep:a,clearDraft:n}=(0,m.T)(),{user:f,isAuthenticated:b}=(0,p.A)(),[v,g]=(0,l.useState)(!0),[w,y]=(0,l.useState)(!1),[j,N]=(0,l.useState)(null),[k,C]=(0,l.useState)(""),S=!t&&b;(0,l.useEffect)(()=>{var e;(null==t||null==(e=t.authData)?void 0:e.creci)&&C(t.authData.creci),g(!1)},[t]);let A=async t=>{if(!k.trim())return void N("Informe o CRECI.");y(!0),N(null);try{S?await x.authApi.requestBrokerUpgrade({creci:k.trim()}):localStorage.getItem("token")&&await x.authApi.updateProfile({creci:k.trim()}),n(),a("complete"),t?e.push("/cadastro/concluido?docs=pending"):e.push("/cadastro/concluido")}catch(e){var r,l;N((null==(l=e.response)||null==(r=l.data)?void 0:r.error)||e.message||"Erro ao salvar CRECI.")}finally{y(!1)}};return v?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center gradient-hero",children:(0,r.jsx)("div",{className:"w-8 h-8 border-4 border-accent-500 border-t-transparent rounded-full animate-spin"})}):(0,r.jsx)("main",{className:"min-h-screen gradient-hero flex items-center justify-center px-4 py-12",children:(0,r.jsxs)("div",{className:"relative z-10 w-full max-w-md",children:[(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-xl rounded-3xl p-8 shadow-2xl border border-white/20",children:[(0,r.jsx)("div",{className:"flex justify-center mb-6",children:(0,r.jsx)(i.default,{src:"/logo.png",alt:"EncontreAqui",width:80,height:80,className:"h-20",style:{width:"auto"}})}),(0,r.jsxs)("div",{className:"text-center mb-6",children:[(0,r.jsx)(c.A,{className:"w-12 h-12 text-accent-400 mx-auto mb-3"}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-white mb-2",children:S?"Evoluir para Corretor":"Informe seu CRECI"}),(0,r.jsx)("p",{className:"text-white/70",children:S?"Para anunciar im\xf3veis, precisamos validar seu registro profissional.":"Antes de finalizar, precisamos do seu registro profissional."})]}),j&&(0,r.jsxs)("div",{className:"mb-6 p-4 bg-red-500/20 border border-red-500/30 rounded-xl flex items-start gap-3",children:[(0,r.jsx)(d.A,{className:"w-5 h-5 text-red-400 mt-0.5 flex-shrink-0"}),(0,r.jsx)("p",{className:"text-red-200 text-sm",children:j})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block text-white/70 text-sm mb-2",children:"N\xfamero do CRECI"}),(0,r.jsx)("input",{type:"text",value:k,onChange:e=>C(e.target.value.toUpperCase()),placeholder:"Ex: 12345-F",className:"w-full px-4 py-4 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/30 focus:outline-none focus:ring-2 focus:ring-accent-500 focus:border-transparent"}),(0,r.jsx)("p",{className:"text-white/50 text-xs mt-2",children:"Formato: n\xfamero + UF ou letra (ex: 12345-GO, 12345-F)"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("button",{onClick:()=>A(!0),disabled:w||!k.trim(),className:"w-full py-4 bg-accent-500 hover:bg-accent-600 text-primary-900 font-semibold rounded-xl shadow-lg shadow-accent-500/25 transition-all duration-200 flex items-center justify-center gap-2 disabled:opacity-50",children:w?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-5 h-5 border-2 border-primary-900 border-t-transparent rounded-full animate-spin"}),"Salvando..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u,{className:"w-5 h-5"}),"Enviar documentos agora"]})}),(0,r.jsxs)("button",{onClick:()=>A(!1),disabled:w||!k.trim(),className:"w-full py-3 bg-white/10 hover:bg-white/20 text-white font-medium rounded-xl border border-white/20 transition-all duration-200 flex items-center justify-center gap-2 disabled:opacity-50",children:[(0,r.jsx)(h.A,{className:"w-4 h-4"}),"Enviar depois"]})]}),(0,r.jsx)("div",{className:"mt-6 p-4 bg-white/5 rounded-xl border border-white/10",children:(0,r.jsx)("p",{className:"text-white/60 text-sm text-center",children:"Seu cadastro como corretor ficar\xe1 pendente de aprova\xe7\xe3o at\xe9 o envio dos documentos."})})]}),(0,r.jsxs)("p",{className:"text-center mt-6 text-white/70",children:["J\xe1 tem uma conta?"," ",(0,r.jsx)(o(),{href:"/login",className:"text-accent-400 hover:text-accent-300 font-medium",children:"Fazer login"})]})]})})}},8435:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(1847).A)("BadgeCheck",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])}},e=>{e.O(0,[563,619,697,239,380,441,255,358],()=>e(e.s=893)),_N_E=e.O()}]);