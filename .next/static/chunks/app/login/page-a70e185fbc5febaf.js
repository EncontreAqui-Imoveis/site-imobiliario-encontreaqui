(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{508:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(1847).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},532:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(1847).A)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},2179:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>v});var r=a(5155),s=a(2115),l=a(2619),i=a.n(l),n=a(63),o=a(5239),c=a(508);let d=(0,a(1847).A)("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);var u=a(3664),m=a(9708),h=a(532),x=a(7828),p=a(2987),g=a(5380),y=a(3935),f=a(960);function b(){let e=(0,n.useRouter)(),t=(0,n.useSearchParams)(),{login:a,loginWithGoogle:l,isAuthenticated:b,isLoading:v,setSession:j}=(0,g.A)(),{saveDraft:w,updateStep:N}=(0,y.T)(),[k,S]=(0,s.useState)(!1),[A,C]=(0,s.useState)(!1),[E,D]=(0,s.useState)(!1),[M,T]=(0,s.useState)(""),[z,O]=(0,s.useState)({email:"",password:""}),[I,F]=(0,s.useState)(!1),[q,L]=(0,s.useState)(null),R=t.get("redirect")||"/";(0,s.useEffect)(()=>{!v&&b&&e.push(R)},[b,v,e,R]);let _=async t=>{t.preventDefault(),T(""),C(!0);try{await a(z.email,z.password),e.push(R)}catch(t){var r;console.error("Login error:",t);let e=(null==(r=t.message)?void 0:r.toLowerCase())||"";e.includes("password")||e.includes("senha")||e.includes("credential")?T('Email ou senha incorretos. Se voc\xea criou sua conta via Google, use o bot\xe3o "Entrar com Google" abaixo, pois sua conta n\xe3o possui senha definida.'):T("Ocorreu um erro ao fazer login. Tente novamente.")}finally{C(!1)}},B=async t=>{T(""),D(!0);try{let a=await l(t);if(a.needsRegistration&&a.pending){w({googleData:{uid:a.pending.uid,email:a.pending.email,displayName:a.pending.name,photoURL:a.pending.photoURL||null,idToken:a.pending.idToken},authData:{name:a.pending.name,email:a.pending.email,password:"",phone:"",street:"",number:"",complement:"",bairro:"",city:"",state:"",cep:"",creci:""}}),e.push("/cadastro?mode=google");return}if(a.requiresProfileChoice&&a.pending){L(a.pending),F(!0),D(!1);return}a.success&&(a.requiresDocuments?e.push("/verificacao"):a.needsCompletion?e.push("/perfil/editar"):e.push(R))}catch(e){var a,r;if(console.error("Google login error:",e),(null==(a=e.message)?void 0:a.includes("popup-closed-by-user"))||(null==(r=e.message)?void 0:r.includes("cancelled")))return;T("Erro ao fazer login com Google. Tente novamente.")}finally{D(!1)}},G=async t=>{if(F(!1),null==q?void 0:q.idToken){D(!0);try{let a=await f.authApi.googleAuth(q.idToken,t);if(a.error)throw Error("string"==typeof a.error?a.error:"Erro ao fazer login com Google");let{user:r,token:s,needsCompletion:l,requiresDocuments:i}=a.data;j(r,s),i?e.push("/verificacao"):l?e.push("/perfil/editar"):e.push(R)}catch(e){console.error("Profile choice error:",e),T("Erro ao concluir login. Tente novamente."),L(null)}finally{D(!1)}}else await B(t)};return I&&q?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 pt-16 lg:pt-20 flex items-center justify-center px-4",children:(0,r.jsxs)("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-lg p-8",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:["Bem-vindo, ",q.name,"!"]}),(0,r.jsx)("p",{className:"text-gray-600",children:"Como voc\xea deseja usar a plataforma?"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("button",{onClick:()=>G("client"),disabled:E,className:"w-full flex items-center gap-4 p-5 bg-white border-2 border-gray-200 hover:border-primary-500 rounded-xl transition-all group",children:[(0,r.jsx)("div",{className:"w-14 h-14 rounded-full bg-blue-100 flex items-center justify-center group-hover:bg-blue-200 transition-colors",children:(0,r.jsx)(c.A,{className:"w-7 h-7 text-blue-600"})}),(0,r.jsxs)("div",{className:"text-left",children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-900 text-lg",children:"Sou Cliente"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Quero buscar e favoritar im\xf3veis"})]})]}),(0,r.jsxs)("button",{onClick:()=>G("broker"),disabled:E,className:"w-full flex items-center gap-4 p-5 bg-white border-2 border-gray-200 hover:border-primary-500 rounded-xl transition-all group",children:[(0,r.jsx)("div",{className:"w-14 h-14 rounded-full bg-green-100 flex items-center justify-center group-hover:bg-green-200 transition-colors",children:(0,r.jsx)(d,{className:"w-7 h-7 text-green-600"})}),(0,r.jsxs)("div",{className:"text-left",children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-900 text-lg",children:"Sou Corretor"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Quero anunciar e gerenciar im\xf3veis"})]})]})]}),(0,r.jsx)("button",{onClick:()=>{F(!1),L(null)},className:"w-full mt-6 text-gray-500 hover:text-gray-700 text-sm",children:"Cancelar"})]})}):(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 pt-16 lg:pt-20",children:(0,r.jsxs)("div",{className:"flex min-h-[calc(100vh-4rem)] lg:min-h-[calc(100vh-5rem)]",children:[(0,r.jsx)("div",{className:"flex-1 flex items-center justify-center px-4 sm:px-6 lg:px-8 py-12",children:(0,r.jsxs)("div",{className:"w-full max-w-md",children:[(0,r.jsx)(i(),{href:"/",className:"flex items-center justify-center mb-8",children:(0,r.jsx)(o.default,{src:"/logo2.svg",alt:"Encontre Aqui Im\xf3veis",width:280,height:80,className:"h-20",style:{width:"auto"}})}),(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Bem-vindo de volta!"}),(0,r.jsx)("p",{className:"text-gray-500",children:"Entre na sua conta para acessar seus favoritos e muito mais."})]}),(0,r.jsxs)("form",{onSubmit:_,className:"space-y-5",children:[M&&(0,r.jsx)("div",{className:"p-4 bg-red-50 border border-red-100 rounded-xl text-red-600 text-sm",children:M}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Email"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(u.A,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,r.jsx)("input",{id:"email",type:"email",value:z.email,onChange:e=>O({...z,email:e.target.value}),placeholder:"seu@email.com",required:!0,className:"w-full bg-white border border-gray-200 rounded-xl pl-12 pr-4 py-3 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Senha"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(m.A,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,r.jsx)("input",{id:"password",type:k?"text":"password",value:z.password,onChange:e=>O({...z,password:e.target.value}),placeholder:"••••••••",required:!0,className:"w-full bg-white border border-gray-200 rounded-xl pl-12 pr-12 py-3 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all"}),(0,r.jsx)("button",{type:"button",onClick:()=>S(!k),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:k?(0,r.jsx)(h.A,{className:"w-5 h-5"}):(0,r.jsx)(x.A,{className:"w-5 h-5"})})]})]}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)(i(),{href:"/recuperar-senha",className:"text-sm text-primary-600 hover:text-primary-700 font-medium",children:"Esqueceu a senha?"})}),(0,r.jsx)("button",{type:"submit",disabled:A,className:"w-full flex items-center justify-center gap-2 py-3.5 bg-accent-500 hover:bg-accent-600 disabled:bg-accent-400 text-primary-900 font-semibold rounded-xl shadow-lg shadow-accent-500/25 transition-all",children:A?(0,r.jsx)("span",{className:"w-5 h-5 border-2 border-primary-900/30 border-t-primary-900 rounded-full animate-spin"}):(0,r.jsxs)(r.Fragment,{children:["Entrar",(0,r.jsx)(p.A,{className:"w-5 h-5"})]})})]}),(0,r.jsxs)("div",{className:"relative my-8",children:[(0,r.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,r.jsx)("div",{className:"w-full border-t border-gray-200"})}),(0,r.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,r.jsx)("span",{className:"px-4 bg-gray-50 text-gray-500",children:"ou continue com"})})]}),(0,r.jsx)("button",{type:"button",onClick:()=>B(),disabled:E,className:"w-full flex items-center justify-center gap-3 py-3.5 bg-white border border-gray-200 hover:bg-gray-50 disabled:opacity-60 rounded-xl font-medium text-gray-700 transition-all",children:E?(0,r.jsx)("span",{className:"w-5 h-5 border-2 border-gray-400/30 border-t-gray-400 rounded-full animate-spin"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,r.jsx)("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,r.jsx)("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,r.jsx)("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Entrar com Google"]})}),(0,r.jsxs)("p",{className:"mt-8 text-center text-gray-600",children:["N\xe3o tem uma conta?"," ",(0,r.jsx)(i(),{href:"/cadastro",className:"text-accent-600 hover:text-accent-700 font-semibold",children:"Cadastre-se gr\xe1tis"})]})]})}),(0,r.jsxs)("div",{className:"hidden lg:block lg:w-1/2 relative",children:[(0,r.jsx)("div",{className:"absolute inset-0 gradient-hero"}),(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center p-12",children:(0,r.jsxs)("div",{className:"text-center text-white max-w-md",children:[(0,r.jsx)("h2",{className:"text-3xl font-bold mb-4",children:"Encontre o im\xf3vel dos seus sonhos"}),(0,r.jsx)("p",{className:"text-lg opacity-90",children:"Milhares de op\xe7\xf5es esperando por voc\xea. Casas, apartamentos, terrenos e muito mais."})]})})]})]})})}function v(){return(0,r.jsx)(s.Suspense,{fallback:(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 pt-20 flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-primary-500 border-t-transparent"})}),children:(0,r.jsx)(b,{})})}},2987:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(1847).A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},3664:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(1847).A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},3935:(e,t,a)=>{"use strict";a.d(t,{J:()=>o,T:()=>c});var r=a(5155),s=a(2115);let l="registration_draft",i={name:"",email:"",password:"",phone:"",street:"",number:"",complement:"",bairro:"",city:"",state:"",cep:"",creci:""},n=(0,s.createContext)(void 0);function o(e){var t,a,o;let{children:c}=e,[d,u]=(0,s.useState)(null),[m,h]=(0,s.useState)(!0);(0,s.useEffect)(()=>{try{let e=localStorage.getItem(l);if(e){let t=JSON.parse(e);t.authData&&(t.authData.password=""),u(t)}}catch(e){console.error("Failed to load registration draft:",e),localStorage.removeItem(l)}finally{h(!1)}},[]);let x=(0,s.useCallback)(e=>{try{let t={...e,authData:{...e.authData,password:""},updatedAt:new Date().toISOString()};localStorage.setItem(l,JSON.stringify(t))}catch(e){console.error("Failed to persist registration draft:",e)}},[]),p=(0,s.useCallback)(e=>{u(t=>{var a,r,s,l,n,o;let c={step:null!=(r=null!=(a=e.step)?a:null==t?void 0:t.step)?r:"form",userType:null!=(l=null!=(s=e.userType)?s:null==t?void 0:t.userType)?l:"client",authData:{...null!=(n=null==t?void 0:t.authData)?n:i,...null!=(o=e.authData)?o:{}},updatedAt:new Date().toISOString()};return x(c),c})},[x]),g=(0,s.useCallback)(e=>{u(t=>{if(!t)return t;let a={...t,step:e,updatedAt:new Date().toISOString()};return x(a),a})},[x]),y=(0,s.useCallback)(e=>{u(t=>{if(!t)return t;let a={...t,authData:{...t.authData,...e},updatedAt:new Date().toISOString()};return x(a),a})},[x]),f=(0,s.useCallback)(()=>{localStorage.removeItem(l),u(null)},[]),b=(0,s.useCallback)(()=>null!==d&&"form"!==d.step,[d]),v={draft:d,isLoading:m,saveDraft:p,updateStep:g,updateAuthData:y,clearDraft:f,hasDraft:b,currentStep:null!=(t=null==d?void 0:d.step)?t:null,authData:null!=(a=null==d?void 0:d.authData)?a:null,userType:null!=(o=null==d?void 0:d.userType)?o:null};return(0,r.jsx)(n.Provider,{value:v,children:c})}function c(){let e=(0,s.useContext)(n);if(void 0===e)throw Error("useRegistration must be used within a RegistrationProvider");return e}},7828:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(1847).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},9267:(e,t,a)=>{Promise.resolve().then(a.bind(a,2179))},9708:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(1847).A)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])}},e=>{e.O(0,[563,619,697,239,380,441,255,358],()=>e(e.s=9267)),_N_E=e.O()}]);